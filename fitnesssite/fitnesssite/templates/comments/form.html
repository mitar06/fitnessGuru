{% load i18n %}
{% load comments widget_tweaks %}
<form method="POST"
      action="{% comment_form_target %}"
      onsubmit="post.disabled = true; return true;"
      class="max-w-full mx-auto">
  {% csrf_token %}
  <fieldset class="flex flex-col space-y-4">
    <input type="hidden" name="next" value="{% url 'comments-xtd-sent' %}" />
    <div class="alert alert-danger" data-comment-element="errors" hidden></div>
    {% for field in form %}
      {% if field.is_hidden %}<div class="hidden">{{ field }}</div>{% endif %}
    {% endfor %}
    <div style="display:none">{{ form.honeypot }}</div>
    <div class=" mb-2 form-group{% if 'comment' in form.errors %} has-danger{% endif %}">
      <div>
        {% render_field form.comment rows="4" class="block p-2.5 w-full text-base text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" %}
      </div> 
    </div>
    {% if not request.user.is_authenticated or not request.user.get_full_name %}
      <div class="mb-2 form-group{% if 'name' in form.errors %} is-invalid{% endif %}">
        <label for="id_name" class="block mb-1 text-base font-medium text-gray-900 dark:text-white">{{ form.name.label }}</label>
        {% render_field form.name  class="bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" %}
      </div>
    {% endif %}
    {% if not request.user.is_authenticated or not request.user.email %}
      <div class="mb-2 form-group{% if 'email' in form.errors %} has-danger{% endif %}">
        <div class="">
          <div>
            <label for="id_email" class="block mb-1 text-base font-medium text-gray-900 dark:text-white">{{ form.email.label }}</label>
            {% render_field form.email  class="bg-gray-50 border border-gray-300 text-gray-900  text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" %}
            <p class="text-left text-xs dark:text-white w-full">{{ form.email.help_text }}</p>
        </div>
         
        </div>
      </div>
    {% endif %}
    {% if not request.user.is_authenticated %}
      <div class="mb-2 form-group{% if 'url' in form.errors %} has-error{% endif %}">
        <label for="id_url" class="block mb-2 text-base font-medium text-gray-900 dark:text-white">{{ form.url.label }}</label>
        {% render_field form.url  class="bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" %}
       
      </div>
    {% endif %}
    <div class="flex items-center py-2 mb-2">
      {% render_field form.followup  class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" %}
      <label for="id_followup{% if cid %}_{{ cid }}{% endif %}" class="ms-2 text-lg sm:text-base font-medium text-gray-900 dark:text-white">{{ form.followup.label }}</label>
    </div>
  </fieldset>
  <div class="my-2">
    <div class=" flex justify-center">
      <input type="submit"
             name="post"
             value="{% trans 'Post' %}"
             class="text-white bg-blue-700 hover:bg-blue-800 flex-1 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-lg  px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800" />
      <input type="submit"
             name="preview"
             value="{% trans 'Preview' %}"
             class="text-white bg-blue-700 hover:bg-blue-800 flex-1 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-lg px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"  />
    </div>
  </div>
</form>
